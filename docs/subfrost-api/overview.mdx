# SUBFROST API Overview

The SUBFROST API provides comprehensive access to Bitcoin blockchain data, Ordinals, Runes, Alkanes smart contracts, and custom Lua scripting capabilities.

## API Endpoints

```
https://{network}.subfrost.io/v4/{api-type}

Networks: mainnet, signet, testnet
API Types: jsonrpc, api, subfrost
```

### Base URLs

| Network | JSON-RPC | REST API |
|---------|----------|----------|
| Mainnet | `https://mainnet.subfrost.io/v4/jsonrpc` | `https://mainnet.subfrost.io/v4/api` |
| Signet | `https://signet.subfrost.io/v4/jsonrpc` | `https://signet.subfrost.io/v4/api` |
| Testnet | `https://testnet.subfrost.io/v4/jsonrpc` | `https://testnet.subfrost.io/v4/api` |

## API Categories

### 1. Esplora API
Bitcoin blockchain queries (Electrs-compatible):
- Address information and balances
- Transaction details and history
- Block data and headers
- Mempool status
- Fee estimates

[Full documentation →](/subfrost-api/esplora-methods)

### 2. Ord API
Ordinals and Runes protocol:
- Inscription data
- Rune balances and transfers
- SAT tracking
- Collection information
- Parent/child relationships

[Full documentation →](/subfrost-api/ord-methods)

### 3. Bitcoin Core RPC
Full Bitcoin node RPC methods:
- Blockchain queries
- Transaction operations
- Network information
- Mining data
- Raw transaction handling

[Full documentation →](/subfrost-api/bitcoin-rpc-methods)

### 4. Alkanes Methods
Smart contract queries:
- Contract bytecode
- Protorunes by address
- Balance queries
- Custom contract methods

[Full documentation →](/subfrost-api/alkanes-methods)

### 5. Lua Scripting
Programmable queries:
- Execute custom Lua scripts
- Save and reuse scripts
- Access all RPC methods from Lua
- Complex data aggregation

[Full documentation →](/subfrost-api/lua-scripting)

## Authentication

### Free Tier (IP-based)
No API key required for basic usage:
- **Rate Limit**: 100 requests/minute
- **Daily Limit**: 10,000 requests/day
- **Burst**: 20 requests

### Paid Tiers (API Key)
Enhanced limits with API key authentication:
- **Standard**: 500 requests/minute
- **Professional**: 2,000 requests/minute
- **Enterprise**: Custom limits

[Rate limiting details →](/subfrost-api/rate-limiting)

## Request Format

### JSON-RPC

```bash
curl -X POST https://mainnet.subfrost.io/v4/jsonrpc \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "btc_getblockcount",
    "params": [],
    "id": 1
  }'
```

### REST API

```bash
curl https://mainnet.subfrost.io/v4/api/esplora/address/bc1q...
```

## Response Format

### Success Response

```json
{
  "jsonrpc": "2.0",
  "result": {
    "data": "...",
    "status": "success"
  },
  "id": 1
}
```

### Error Response

```json
{
  "jsonrpc": "2.0",
  "error": {
    "code": -32600,
    "message": "Invalid request"
  },
  "id": 1
}
```

## Common Use Cases

### 1. Query Address Balance

```bash
# Esplora API
curl https://mainnet.subfrost.io/v4/api/esplora/address/bc1q.../utxo

# Returns UTXO list with balances
```

### 2. Get Alkanes Balance

```bash
# JSON-RPC
curl -X POST https://mainnet.subfrost.io/v4/jsonrpc \
  -d '{
    "jsonrpc": "2.0",
    "method": "alkanes_protorunesbyaddress",
    "params": [{
      "address": "bc1p...",
      "protocolTag": "1"
    }, "latest"],
    "id": 1
  }'
```

### 3. Get Transaction Details

```bash
# Ord API
curl https://mainnet.subfrost.io/v4/api/ord/tx/<txid>
```

### 4. Execute Lua Script

```bash
curl -X POST https://mainnet.subfrost.io/v4/jsonrpc \
  -d '{
    "jsonrpc": "2.0",
    "method": "sandshrew_evalscript",
    "params": [
      "local height = _RPC.btc_getblockcount()\nreturn {height = height}",
      []
    ],
    "id": 1
  }'
```

## Method Count Summary

| Category | Method Count |
|----------|--------------|
| Esplora | 35 methods |
| Ord | 30 methods |
| Bitcoin Core RPC | 60+ methods |
| Alkanes | 10+ methods |
| Metashrew | 5 methods |
| Sandshrew | 5 methods |
| Lua (custom) | Unlimited |
| **Total** | **166+ documented methods** |

## API Features

### Real-Time Data
✅ Up-to-date blockchain state  
✅ Mempool monitoring  
✅ Live transaction broadcasting  

### Historical Data
✅ Full transaction history  
✅ Address analytics  
✅ Block explorer functionality  

### Smart Contracts
✅ Alkanes contract queries  
✅ Protorunes balances  
✅ Contract state inspection  

### Programmability
✅ Lua scripting engine  
✅ Multi-call batching  
✅ Custom aggregations  

## SDK Support

### JavaScript/TypeScript
```typescript
import { SubfrostAPI } from '@subfrost/api';

const api = new SubfrostAPI({
  network: 'mainnet',
  apiKey: 'your-api-key' // optional
});

const balance = await api.alkanes.getBalance({
  address: 'bc1p...',
  alkaneId: { block: 32, tx: 0 }
});
```

### Python
```python
from subfrost import SubfrostAPI

api = SubfrostAPI(network='mainnet')
balance = api.alkanes.get_balance(
    address='bc1p...',
    alkane_id={'block': 32, 'tx': 0}
)
```

### CLI
```bash
# Using alkanes-cli
alkanes alkanes getbalance \
  --address "bc1p..." \
  --alkane-id "32:0"
```

## Error Codes

| Code | Meaning |
|------|---------|
| -32700 | Parse error |
| -32600 | Invalid request |
| -32601 | Method not found |
| -32602 | Invalid params |
| -32603 | Internal error |
| 429 | Rate limit exceeded |
| 503 | Service unavailable |

## Best Practices

### Rate Limiting
✅ Implement exponential backoff  
✅ Cache responses when possible  
✅ Use batch calls for multiple queries  
✅ Monitor your usage  

### Performance
✅ Use specific queries (avoid wildcard)  
✅ Paginate large result sets  
✅ Use Lua scripts for complex aggregations  
✅ Request only needed fields  

### Error Handling
✅ Check for error responses  
✅ Retry on 503 (service unavailable)  
✅ Handle 429 (rate limit) gracefully  
✅ Log errors for debugging  

## API Status

Check API health:
```bash
curl https://mainnet.subfrost.io/v4/api/health
```

Response:
```json
{
  "status": "healthy",
  "indexer_height": 880500,
  "bitcoin_height": 880500,
  "synced": true
}
```

## Support

- **Documentation**: Individual method pages linked above
- **Examples**: [Code examples repository](#)
- **Discord**: [SANDSHREW サンド Discord](#)
- **Status**: [status.subfrost.io](#)

## Next Steps

- [Esplora Methods →](/subfrost-api/esplora-methods)
- [Ord Methods →](/subfrost-api/ord-methods)
- [Bitcoin RPC Methods →](/subfrost-api/bitcoin-rpc-methods)
- [Alkanes Methods →](/subfrost-api/alkanes-methods)
- [Lua Scripting →](/subfrost-api/lua-scripting)
- [Rate Limiting →](/subfrost-api/rate-limiting)
