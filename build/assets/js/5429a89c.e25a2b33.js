"use strict";(self.webpackChunksubfrost_docs=self.webpackChunksubfrost_docs||[]).push([[392],{1058:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"developer-guide/alkanes","title":"Alkanes Metaprotocol","description":"The Alkanes Metaprotocol is a powerful system for creating stateful, smart contract-like applications on top of the Bitcoin blockchain. It is the engine that powers synthetic assets like frBTC and enables complex logic to be executed in a way that is verifiable by the underlying SUBFROST consensus.","source":"@site/docs/developer-guide/alkanes.mdx","sourceDirName":"developer-guide","slug":"/developer-guide/alkanes","permalink":"/developer-guide/alkanes","draft":false,"unlisted":false,"editUrl":"https://github.com/subfrost/subfrost/tree/main/docs/developer-guide/alkanes.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Alkanes Metaprotocol","sidebar_position":4},"sidebar":"docs","previous":{"title":"Proof-of-Stake","permalink":"/developer-guide/proof-of-stake"},"next":{"title":"Subrail Runtime","permalink":"/developer-guide/subrail"}}');var o=t(4848),i=t(8453);const r={title:"Alkanes Metaprotocol",sidebar_position:4},a="Alkanes Metaprotocol",l={},c=[{value:"Core Idea: Runestones",id:"core-idea-runestones",level:2},{value:"Structure of a Runestone",id:"structure-of-a-runestone",level:2},{value:"Example: Minting <code>frBTC</code>",id:"example-minting-frbtc",level:3},{value:"Example: Burning <code>frBTC</code> (Unwrapping)",id:"example-burning-frbtc-unwrapping",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"alkanes-metaprotocol",children:"Alkanes Metaprotocol"})}),"\n",(0,o.jsxs)(n.p,{children:["The Alkanes Metaprotocol is a powerful system for creating stateful, smart contract-like applications on top of the Bitcoin blockchain. It is the engine that powers synthetic assets like ",(0,o.jsx)(n.code,{children:"frBTC"})," and enables complex logic to be executed in a way that is verifiable by the underlying SUBFROST consensus."]}),"\n",(0,o.jsx)(n.h2,{id:"core-idea-runestones",children:"Core Idea: Runestones"}),"\n",(0,o.jsxs)(n.p,{children:["Alkanes builds upon the concept of Runes, embedding protocol messages inside the ",(0,o.jsx)(n.code,{children:"OP_RETURN"})," output of a Bitcoin transaction. This embedded data is called a ",(0,o.jsx)(n.strong,{children:"Runestone"}),"."]}),"\n",(0,o.jsx)(n.p,{children:'A Runestone is a structured piece of data that instructs the Alkanes protocol on how to alter the state of its "on-chain" programs. Because this data is part of a valid Bitcoin transaction, it inherits the security and immutability of the Bitcoin network.'}),"\n",(0,o.jsxs)(n.p,{children:["The SUBFROST network uses a ",(0,o.jsx)(n.code,{children:"metashrew"})," indexer to read these ",(0,o.jsx)(n.code,{children:"OP_RETURN"})," outputs, interpret the Runestones, and apply the resulting state changes to the Alkanes state database."]}),"\n",(0,o.jsx)(n.h2,{id:"structure-of-a-runestone",children:"Structure of a Runestone"}),"\n",(0,o.jsxs)(n.p,{children:["From our analysis of the ",(0,o.jsx)(n.code,{children:"alkanes"})," integration scripts, a Runestone for a token operation has several key fields:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"protocolTag"}),": An identifier for the specific metaprotocol (e.g., ",(0,o.jsx)(n.code,{children:"1n"})," for the base protorune protocol)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"edicts"}),": An array of instructions that modify rune balances.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"id"}),": The ID of the rune being affected (e.g., ",(0,o.jsx)(n.code,{children:"{ block: 4n, tx: 0n }"})," for ",(0,o.jsx)(n.code,{children:"frBTC"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"amount"}),": The quantity of the rune to be minted or transferred."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"output"}),": The index of the transaction output that will receive the runes."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"pointer"}),": A default output index to assign any unassigned runes."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"calldata"}),": An arbitrary byte array that can be used to pass data to the Alkane contract, effectively calling a function."]}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"example-minting-frbtc",children:["Example: Minting ",(0,o.jsx)(n.code,{children:"frBTC"})]}),"\n",(0,o.jsx)(n.p,{children:"When a user wraps BTC, they create a transaction with a Runestone that looks something like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "protostones": [{\n    "protocolTag": 1n,\n    "edicts": [{\n      "id": { "block": 4n, "tx": 0n }, // frBTC Alkane ID\n      "amount": 100000000n,             // 1.0 frBTC (in satoshis)\n      "output": 2                      // Assign to the 3rd output\n    }],\n    "pointer": 1,\n    "calldata": [4n, 0n, 77n] // Call the \'mint\' function\n  }]\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"This Runestone instructs the protocol to:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Identify the ",(0,o.jsx)(n.code,{children:"frBTC"})," Alkane contract."]}),"\n",(0,o.jsxs)(n.li,{children:["Mint ",(0,o.jsx)(n.code,{children:"1.0"})," new ",(0,o.jsx)(n.code,{children:"frBTC"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Assign ownership of this new ",(0,o.jsx)(n.code,{children:"frBTC"})," to the recipient of the transaction's third output."]}),"\n",(0,o.jsxs)(n.li,{children:["Pass ",(0,o.jsx)(n.code,{children:"[4, 0, 77]"})," as calldata to the contract's logic."]}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"example-burning-frbtc-unwrapping",children:["Example: Burning ",(0,o.jsx)(n.code,{children:"frBTC"})," (Unwrapping)"]}),"\n",(0,o.jsxs)(n.p,{children:["To unwrap, a user spends the UTXO containing ",(0,o.jsx)(n.code,{children:"frBTC"}),". The Runestone in this transaction will have an empty ",(0,o.jsx)(n.code,{children:"edicts"})," array, which signals a burn. The ",(0,o.jsx)(n.code,{children:"calldata"})," is used to specify the destination Bitcoin address for the released collateral."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "protostones": [{\n    "protocolTag": 1n,\n    "edicts": [], // An empty array signifies a burn of input runes\n    "pointer": 0,\n    "calldata": [4n, 0n, 78n, /*...destination address...*/] // Call \'burn\'\n  }]\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"This mechanism allows for a flexible and expressive way to manage digital assets and execute complex logic, all while anchored to the security of the Bitcoin blockchain."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(6540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);